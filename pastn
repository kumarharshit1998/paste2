private void DefineHttpClient(string path)
{
    var handler = new HttpClientHandler();
    
    // Load the certificate
    var certPath = Path.Combine(AppContext.BaseDirectory, configuration["MuleSoftC360Config:CertPath"]);
    var certPassword = RVSecrets.MulesoftClientSecret; // Assuming same as before
    var certificate = new X509Certificate2(certPath, certPassword,
        X509KeyStorageFlags.EphemeralKeySet | X509KeyStorageFlags.Exportable);

    handler.ClientCertificates.Add(certificate);
    handler.ClientCertificateOptions = ClientCertificateOption.Manual;
    
    client = new HttpClient(handler)
    {
        BaseAddress = new Uri(c360BaseURL + path)
    };

    client.DefaultRequestHeaders.Accept.Clear();
    client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
    client.DefaultRequestHeaders.Add("x-tfc-authorization", c360SecretKey); // Optional custom header
}



"MuleSoftC360Config": {
  "CertPath": "CERT/your-cert.pfx",
  "CertPassword": "your-cert-password",
  "C360BaseURL": "https://example.com",
  ...
}
